---
layout: single
title:  "UE5_Study3 UE5 슈팅게임C++으로 제작하기 "
categories: UE5
tag: [UE5]
toc: true
toc_sticky: true
sidebar:
    nav: "counts"
---

# UE 슈팅게임 제작하기

## 1.  UE 게임모드 설정하기

### Gamemode base를 제작하기
    레벨에서 사용할 게임모드 베이스를 제작하기

### Project - Map & Modes 에서 설정
    만들어둔 게임모드 를 선택하기
    사용하는 Default Pawn Class , HUD Class , Player Controller Class , Game State Class,,, 을 설정

     

## 2.   입력 바인딩 하기

### Input Action 
    Value type 을 설정


### Input Mapping Context
    미리 만들어 둔 Input Action 을 설정  
    여기서 키와 값을 바인딩

## 3.   바인딩 한 입력값을 PlayerPawn에 C++으로 적용시키기

    (1).Build.cs 파일 에서 "EnhancedInput"  모듈을 추가 해주기 

    ```
    PublicDependencyModuleNames.AddRange(new string[] { "Core", "CoreUObject", "Engine", "InputCore" ,"EnhancedInput" });

    ```

    (2) 헤더에서 미리 만들어둔 Input Action,Input Mapping Context 을 사용하기 위해서 선언

    ```
    protected:
	// Called when the game starts or when spawned
	virtual void BeginPlay() override;

	UPROPERTY(EditAnywhere, BlueprintReadOnly,Category = Input)
	UInputMappingContext* PlayerMappingContext;
	// 선언하고 만들어둔 Input Mapping Context 를  에디터에서 할당  "Category = Input"

	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = Input)
	UInputAction* MoveAxis;
	// 선언하고 만들어둔 Input Action 을  에디터에서 할당  "Category = Input"


	void Move(const FInputActionValue& value);
    ```

    (3)cpp파일
     (3)-1.게임이 시작할때 Input Mapping Context 을 설정해주기 


    ```
        void APlayerPawn::BeginPlay()
    {
        Super::BeginPlay();
        
        if (APlayerController* PlayerController = Cast<APlayerController>(GetController()))
        {
            if (UEnhancedInputLocalPlayerSubsystem* Subsystem = ULocalPlayer::GetSubsystem<UEnhancedInputLocalPlayerSubsystem>(PlayerController->GetLocalPlayer()))
            {
                Subsystem->AddMappingContext(PlayerMappingContext, 0);
            }
            
        }

    }
    ```

     (3)-2.입력을 바인딩 해주기

    ```
        void APlayerPawn::SetupPlayerInputComponent(UInputComponent* PlayerInputComponent)
    {
        Super::SetupPlayerInputComponent(PlayerInputComponent);

        if (UEnhancedInputComponent* EnhancedInputComponent = CastChecked< UEnhancedInputComponent>(PlayerInputComponent))
        {
            EnhancedInputComponent->BindAction(MoveAxis, ETriggerEvent::Triggered, this, &APlayerPawn::Move);
        }

    }        
    ```





